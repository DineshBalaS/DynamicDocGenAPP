Of course. Here is my understanding of the five API endpoints that form the core of your Flask backend.

---

### ## 1. `POST /api/upload`
This is the **initial analysis** endpoint. [cite_start]Its only job is to inspect a PowerPoint file without saving it permanently[cite: 59, 60].

* [cite_start]**Purpose:** To receive a `.pptx` file, parse it to find all potential `{{placeholders}}`, and send that list back to the user for review[cite: 59].
* [cite_start]**Input:** A `.pptx` file sent from the frontend[cite: 59].
* [cite_start]**Process:** The backend receives the file and uses a library or regular expressions to find all placeholder tags within it[cite: 59].
* [cite_start]**Output:** A **JSON array** containing the list of placeholder strings found in the file (e.g., `["client_name", "project_title", "date"]`)[cite: 59].

TESTS PASSED

---

### ## 2. `POST /api/save_template`
This is the **template creation** endpoint. [cite_start]It's called after the user has reviewed the placeholders and given the template a name[cite: 95, 96, 99].

* [cite_start]**Purpose:** To permanently store the template file in the cloud and save its metadata in the database[cite: 61, 62].
* [cite_start]**Input:** A `multipart/form-data` request containing the original `.pptx` file, a **template name**, and the final, confirmed **list of placeholders**[cite: 61, 97, 98, 100].
* **Process:**
    1.  [cite_start]Uploads the `.pptx` file to your **AWS S3 bucket** using `boto3`[cite: 62, 104].
    2.  [cite_start]Saves the template's metadata—including its name, S3 URL, S3 key, and placeholder list—as a new record in the **PostgreSQL database**[cite: 62, 106].
* [cite_start]**Output:** A success message that includes the **unique ID** of the newly created template[cite: 101, 107].

TESTS PASSED

---

### ## 3. `GET /api/templates`
This is the **dashboard** endpoint, used to retrieve all available templates for the user to see.

* [cite_start]**Purpose:** To fetch a list of all templates that have been saved in the database[cite: 63].
* **Input:** None.
* [cite_start]**Process:** It queries the PostgreSQL database to get all records from the `templates` table[cite: 63].
* [cite_start]**Output:** A **JSON array** where each object represents a saved template, containing its ID, name, S3 URL, etc.[cite: 63].

---

### ## 4. `DELETE /api/templates/<template_id>`
This is the **cleanup** endpoint for removing a template.

* [cite_start]**Purpose:** To completely delete a template, which involves removing both its file from cloud storage and its record from the database[cite: 64, 66, 67].
* [cite_start]**Input:** The **ID** of the template to be deleted, passed as part of the URL path[cite: 64].
* **Process:**
    1.  [cite_start]Fetches the template's record from the database to get its `s3_key`[cite: 65].
    2.  [cite_start]Uses `boto3` to delete the file from the **AWS S3 bucket**[cite: 66].
    3.  [cite_start]Deletes the template's record from the **PostgreSQL database**[cite: 67].
* **Output:** A success or failure confirmation message.

TESTS PASSED

---

### ## 5. `POST /api/generate`
This is the **core functional endpoint** of the entire application, responsible for creating the final product.

* [cite_start]**Purpose:** To take user data, apply it to a specific template, and generate a new, populated `.pptx` file[cite: 68, 69].
* [cite_start]**Input:** A **JSON object** containing the `template_id` to use and another object with the placeholder values (e.g., `{ "client_name": "Acme Corp", "date": "2025-10-07" }`)[cite: 68, 118].
* **Process:**
    1.  [cite_start]Queries the database with the `template_id` to find the template's `s3_key`[cite: 68, 124].
    2.  [cite_start]Downloads the corresponding `.pptx` file **from S3 into memory**[cite: 69, 125].
    3.  [cite_start]Uses the `python-pptx-templater` library to replace the placeholders with the user-provided data in memory[cite: 69, 126].
* [cite_start]**Output:** The newly generated `.pptx` file, sent back to the client **as a file download**[cite: 69, 127].

Of course. Here is the API documentation for the newly created endpoint, written in a clean and standard format.

-----

### \#\# API Endpoint: Upload Asset

`POST /api/assets/upload`

This endpoint is used to upload a temporary asset, such as an image for a presentation placeholder. It's designed for files that are part of a single session and do not need to be stored permanently.

Files uploaded here are saved to a `temp/` directory in the S3 bucket and are intended to be automatically deleted by an S3 Lifecycle Policy after a short period (e.g., 24 hours).

-----

### **Request**

  * **Method**: `POST`
  * **Body**: `multipart/form-data`
  * **Fields**:
      * `file`: The image file to be uploaded.

#### **Validation**

  * The request **must** contain a file part with the key `file`.
  * The uploaded file **must** have a filename.
  * The file extension **must** be one of the following allowed types: `.png`, `.jpg`, `.jpeg`, or `.gif`.

-----

### **Responses**

#### ✅ **Success Response**

  * **Status Code**: `201 Created`

  * **Content**: A JSON object containing the unique S3 key for the uploaded asset. This key should be used in the `/api/generate` request.

  * **Example Body**:

    ```json
    {
        "s3_key": "temp/a1b2c3d4-e5f6-7890-a1b2-c3d4e5f67890.jpg"
    }
    ```

#### ❌ **Error Responses**

  * **Status Code**: `400 Bad Request`

      * **Reason**: A required part of the request is missing or invalid.
      * **Example Body**:
        ```json
        {
            "error": "No file part in the request"
        }
        ```
        *or*
        ```json
        {
            "error": "Invalid file type. Allowed types are: .png, .jpg, .jpeg, .gif"
        }
        ```

  * **Status Code**: `500 Internal Server Error`

      * **Reason**: A problem occurred on the server, most likely during the file upload to S3 storage.
      * **Example Body**:
        ```json
        {
            "error": "Failed to upload asset to storage."
        }
        ```


GET /api/templates/<int:template_id>

This endpoint retrieves the full details for a single template, including its ID, name, creation date, and its full list of placeholders. This is used when a user selects a template to view or to begin the generation process.

Request
Method: GET

Path Parameters:

template_id (integer): The unique identifier of the template to retrieve.

Responses
✅ Success Response
Status Code: 200 OK

Content: A JSON object containing the complete details for the requested template.

Example Body:

JSON

{
    "id": 12,
    "name": "Monthly Client Report",
    "created_at": "2025-10-20T14:22:01Z",
    "placeholders": [
        {"name": "client_name", "type": "text"},
        {"name": "month", "type": "text"},
        {"name": "cover_image", "type": "image"}
    ]
}
❌ Error Responses
Status Code: 404 Not Found

Reason: The template with the specified template_id does not exist or has been deleted.

Example Body:

JSON

{
    "error": "Template not found."
}
Status Code: 500 Internal Server Error

Reason: A database error occurred during the query.

Example Body:

JSON

{
    "error": "A database error occurred."
}
## API Endpoint: Search Images
GET /api/images/search

This endpoint provides a way to search for images from an external service. It is used to populate an image search modal for image-type placeholders.

Note: This endpoint is currently a placeholder and returns a static, pre-defined list of images to simulate an API response.

Request
Method: GET

Query Parameters:

q (string): The search query (e.g., "nature", "office").

Validation
The request must contain a search query parameter q.

Responses
✅ Success Response
Status Code: 200 OK

Content: A JSON array of mock image objects.

Example Body:

JSON

[
    {
        "id": 1,
        "url": "https://images.pexels.com/photos/3225517/pexels-photo-3225517.jpeg?...",
        "alt": "A beautiful landscape"
    },
    {
        "id": 2,
        "url": "https://images.pexels.com/photos/167699/pexels-photo-167699.jpeg?...",
        "alt": "A foggy forest"
    }
]
❌ Error Responses
Status Code: 400 Bad Request

Reason: The required q query parameter was not provided.

Example Body:

JSON

{
    "error": "A search query 'q' is required."
}
## API Endpoint: Upload Asset from URL
POST /api/assets/upload_from_url

This endpoint downloads an image directly from a public URL and uploads it to the S3 temp/ directory. This is an alternative to a direct file upload, used for images selected from the image search.

Request
Method: POST

Body: application/json

Fields:

url (string): The public URL of the image to download and save.

Validation
The request body must contain a url field.

Responses
✅ Success Response
Status Code: 201 Created

Content: A JSON object containing the unique S3 key for the newly uploaded asset. This key can be used in the /api/generate request.

Example Body:

JSON

{
    "s3_key": "temp/c4a5b6d7-e8f9-1234-a5b6-c7d8e9f01234.jpeg"
}
❌ Error Responses
Status Code: 400 Bad Request

Reason: The url field is missing from the JSON body.

Example Body:

JSON

{
    "error": "Image URL is required."
}
Status Code: 500 Internal Server Error

Reason: An error occurred on the server, either while downloading the image from the URL or uploading the file to S3 storage.

Example Body:

JSON

{
    "error": "An unexpected server error occurred."
}